jQuery(function(a){a(document).on("change",".wc-gzdp-generator input, .wc-gzdp-generator select",function(){a(this).parents("tr").trigger("check_question")}),a(".wc-gzdp-generator .form-table tr").bind("check_question",function(){a(this).find("input:not(.select2-focusser, .select2-input), select").each(function(){a(this).trigger("check_input")})}),a(".wc-gzdp-generator .form-table tr input, .wc-gzdp-generator .form-table tr select").bind("check_input",function(){var b=!1;(a(this).is(":checked")||a(this).is(":selected"))&&(b=!0);var c=a(this).attr("name");if("undefined"!=typeof c&&c!==!1){var d=c.replace("[]",""),e=a(this);a(this).val();a(".wc-gzdp-generator").find("input[data-show_if_"+d+"], select[data-show_if_"+d+"], textarea[data-show_if_"+d+"]").each(function(){a(this).trigger("check_show_if_"+(b?"checked":"unchecked"),e)}),a(this).parents(".form-table").trigger("check_table")}}),a(".wc-gzdp-generator input, .wc-gzdp-generator select, .wc-gzdp-generator textarea").bind("check_show_if_checked",function(b,c){var d=a(c).val(),e=a(c).attr("name").replace("[]",""),f=a(this).data("show_if_"+e);f=="equal_"+d&&a(c).is(":visible")&&a(this).parents("tr").show(),a(this).trigger("check_input")}),a(".wc-gzdp-generator input, .wc-gzdp-generator select, .wc-gzdp-generator textarea").bind("check_show_if_unchecked",function(b,c){var d=a(c).val(),e=a(c).attr("name").replace("[]",""),f=a(this).data("show_if_"+e);f!="equal_"+d&&a(c).is(":visible")||a(this).parents("tr").hide(),a(this).trigger("check_input")}),a(".wc-gzdp-generator .form-table").bind("check_table",function(){var b=!0,c=a(this);a(this).find("tr").each(function(){a(this).is(":visible")&&(b=!1)}),b&&c.hide()}),a(".wc-gzdp-generator .form-table tr").bind("desc",function(b,c){c.length>0&&(a(".wc-gzdp-generator-sidebar .info").html(c).show(),a(".wc-gzdp-generator-sidebar .info").offset({top:a(this).offset().top}))}),a(document).on("mouseover",".wc-gzdp-generator .form-table tr",function(){a(this).find("*[data-custom-desc]:first").length>0&&a(this).trigger("desc",a(this).find("*[data-custom-desc]:first").data("custom-desc"))}),a(".wc-gzdp-generator .form-table tr").each(function(){var b=a(this).find(':input[data-mandatory^="<span"]');if(b.addClass("wc-gzdp-input-mandatory"),b.length>0){var c=b.data("mandatory");a(this).find("label:first").append(" "+c)}}),a(".wc-gzdp-generator .form-table input[type=radio]:checked, .wc-gzdp-generator .form-table input[type=checkbox]:checked, .wc-gzdp-generator .form-table select").trigger("change"),a(".wc-gzdp-generator").delay(800).animate({opacity:1},150),a(document).on("change",".wc-gzdp-disclaimer-input",function(){a(this).parents(".wc-gzdp-disclaimer").removeClass("notice-error notice-success"),a(this).is(":checked")?(a(".wc-gzdp-generator-submit").show(),a(this).parents(".wc-gzdp-disclaimer").addClass("notice-success")):(a(".wc-gzdp-generator-submit").hide(),a(this).parents(".wc-gzdp-disclaimer").addClass("notice-error"))}),a(".wc-gzdp-generator").length>0&&a(document).on("submit",".woocommerce #mainform",function(){if(!a(".wc-gzdp-disclaimer-input").is(":checked"))return a(".wc-gzdp-disclaimer").removeClass("notice-success"),a(".wc-gzdp-disclaimer").addClass("notice-error"),!1;var b=!1;return a(".wc-gzdp-generator").find(":input.wc-gzdp-input-mandatory").each(function(){var c=a(this),d=!0;c.removeClass("wc-gzdp-input-error"),c.is("input")?"text"===c.attr("type")&&""===c.val()&&(d=!1):c.is("select")||c.is("textarea")&&""===c.val()&&(d=!1),d||(b=!1,c.addClass("wc-gzdp-input-error"))}),b?void a(".wc-gzdp-generator tr").each(function(){a(this).is(":visible")||a(this).remove()}):(a([document.documentElement,document.body]).animate({scrollTop:a(".wc-gzdp-input-error:first").offset().top-60},1e3),!1)});wp.media.editor.send.attachment;a(document).on("click",".button-wc-gzdp-attachment-field",function(b){var c=a(this).data("input"),d=a("#"+c),e="1"==a(this).data("multiple"),f=a(this).data("type"),g=a(this).parents(".wc-gzdp-attachment-wrapper");"undefined"!=typeof custom_file_frame&&custom_file_frame.close(),custom_file_frame=wp.media.frames.customHeader=wp.media({title:wc_gzdp_attachment_field.title,library:{type:f},button:{text:wc_gzdp_attachment_field.insert},multiple:e}),custom_file_frame.on("select",function(){var b=d.val().split(","),c=custom_file_frame.state().get("selection").toJSON(),f=d.val(),h=f.split(",");!e&&h.length>0&&(a.each(h,function(b,d){var e=!0;a.each(c,function(a,b){b.id==d&&(e=!1)}),e&&g.find('a.unset-attachment[data-unset="'+d+'"]').trigger("click")}),f=d.val()),a.each(c,function(c,d){a.inArray(String(d.id),b)===-1&&(f+=(c>0||f.length>0?",":"")+d.id,g.find(".current-attachment").append('<div class="wc-gzdp-unset-attachment-wrap data-unset-'+d.id+'"><a class="unset-attachment" data-unset="'+d.id+'" href="#"><i class="fa fa-remove"></i></a> <a href="'+d.editLink+'" target="_blank">'+d.title+"</a></div>"))}),d.val(f)}),custom_file_frame.open()}),a(document).on("click",".unset-attachment",function(){var b=a(this).data("unset"),c=a(this).parents(".wc-gzdp-attachment-wrapper").find(".wc-gzdp-attachment-id-data"),d=c.val(),e=d.split(","),f="",g=0;return a.each(e,function(a,c){b!=c&&(f+=(g++>0?",":"")+c)}),c.val(f),a(this).parents(".current-attachment").find(".data-unset-"+b).remove(),!1});var b=["#woocommerce_gzdp_invoice_cancellation_numbering","#woocommerce_gzdp_invoice_packing_slip_enable_numbering","#woocommerce_gzdp_invoice_auto","#woocommerce_gzdp_invoice_cancellation_auto","#woocommerce_gzdp_invoice_show_page_numbers","#woocommerce_gzdp_invoice_cancellation_table_content","#woocommerce_gzdp_invoice_packing_slip_table_content"];a(document).on("change","#woocommerce_gzdp_invoice_auto",function(){a(this).is(":checked")?(a("#woocommerce_gzdp_invoice_auto_email").parents("tr").show(),a("#woocommerce_gzdp_invoice_auto_except_free").parents("tr").show()):(a("#woocommerce_gzdp_invoice_auto_email").parents("tr").hide(),a("#woocommerce_gzdp_invoice_auto_except_free").parents("tr").hide())}),a(document).on("change","#woocommerce_gzdp_invoice_cancellation_auto",function(){a(this).is(":checked")?a("#woocommerce_gzdp_invoice_cancellation_auto_email").parents("tr").show():a("#woocommerce_gzdp_invoice_cancellation_auto_email").parents("tr").hide()}),a(document).on("change","#woocommerce_gzdp_invoice_show_page_numbers",function(){a(this).is(":checked")?a("#woocommerce_gzdp_invoice_page_numbers_bottom").parents("tr").show():a("#woocommerce_gzdp_invoice_page_numbers_bottom").parents("tr").hide()}),a(document).on("change","#woocommerce_gzdp_invoice_cancellation_table_content",function(){a(this).is(":checked")?a("#woocommerce_gzdp_invoice_cancellation_text_after_table").parents("tr").show():a("#woocommerce_gzdp_invoice_cancellation_text_after_table").parents("tr").hide()}),a(document).on("change","#woocommerce_gzdp_invoice_packing_slip_table_content",function(){a(this).is(":checked")?a("#woocommerce_gzdp_invoice_packing_slip_text_after_table").parents("tr").show():a("#woocommerce_gzdp_invoice_packing_slip_text_after_table").parents("tr").hide()}),a.each(b,function(b,c){a(document).on("change",c,function(){a(this).is(":checked")?a(this).parents("tr").next("tr").show():a(this).parents("tr").next("tr").hide()}),a(c).trigger("change")}),a(".wc-gzdp-input-reset-locked").each(function(){var b=a(this).attr("name");a(this).after('<span class="wc-gzdp-reset-checkbox"><input type="checkbox" class="'+b+'_lock" name="'+b+'_lock" value="1" /> '+a(this).data("unlock-title")+"</span>"),a(this).prop("readonly","readonly"),a(document).on("change","."+b+"_lock",function(){a(this).is(":checked")?a(this).parents("td").find("input.wc-gzdp-input-reset-locked").prop("readonly",""):a(this).parents("td").find("input.wc-gzdp-input-reset-locked").prop("readonly","readonly")})})});