jQuery(function(a){var b={init:function(){this.$form=a("form.checkout"),this.methods=wc_gzdp_stripe_multistep_params.methods,this.update(),a(document.body).bind("updated_checkout",this.update),a(document.body).bind("wc_gzdp_step_changed",this.update),a(document).on("checkout_error",this.change),this.$form.on("change",this.change)},isStripePaymentMethodSelected:function(){return a("input[id=^payment_method_stripe]").is(":checked")},isStripePaymentMethodWithHandlingSelected:function(){var c=!1;return a.each(b.methods,function(d,e){var f=b.getPaymentMethodId(d);e.needs_handling&&a(f).is(":checked")&&(c=!0)}),c},isStripePaymentMethodWithoutHandlingSelected:function(){var c=!1;return a.each(b.methods,function(d,e){var f=b.getPaymentMethodId(d);!e.needs_handling&&a(f).is(":checked")&&(c=!0)}),c},getPaymentMethodId:function(a){return"input#payment_method_stripe"+("stripe"!=a?"_"+a:"")},preventEarlyStripeExecution:function(){a("#step-wrapper-order").hasClass("step-wrapper-active")?b.$form.find(".wc-gzdp-stripe-token-fix").remove():a("#step-wrapper-payment").hasClass("step-wrapper-active")&&b.isStripePaymentMethodWithHandlingSelected()?b.$form.find(".wc-gzdp-stripe-token-fix").remove():(b.isStripePaymentMethodWithoutHandlingSelected()||b.isStripePaymentMethodWithHandlingSelected())&&0==b.$form.find(".wc-gzdp-stripe-token-fix").length&&b.$form.append('<input type="hidden" name="stripe_token" class="stripe_token wc-gzdp-stripe-token-fix" />')},change:function(){b.preventEarlyStripeExecution()},update:function(){b.preventEarlyStripeExecution()}};b.init()});